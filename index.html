<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spanish Prompt Generation</title>
  <style>
    /* Base styling */
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f7f7f7;
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    /* Container styling */
    .container {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 900px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    /* Title styling */
    h1 {
      width: 100%;
      text-align: center;
      color: maroon;
      font-size: 2rem;
      margin-bottom: 20px;
    }

    /* Two-column layout */
    .column {
      flex: 1;
      min-width: 300px;
    }

    /* Scrollable checkbox group */
    .checkbox-group {
      max-height: 300px;
      overflow-y: auto;
      padding: 10px;
      margin-bottom: 15px;
      /* Consistent margin */
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #f9f9f9;
      box-sizing: border-box;
      /* Ensure padding is included in element's width/height */
    }

    .checkbox-group label {
      display: block;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s;
    }

    .checkbox-group label:hover {
      background-color: #f2f2f2;
      border-color: maroon;
    }

    input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }

    /* Input fields and text areas */
    input[type="text"],
    textarea {
      width: 100%;
      margin-bottom: 15px;
      /* Consistent margin */
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      font-family: 'Arial', sans-serif;
      font-size: 1rem;
      box-sizing: border-box;
    }

    textarea {
      height: 100px;
      resize: none;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: maroon;
      box-shadow: 0 0 4px rgba(128, 0, 0, 0.5);
    }

    button {
      display: inline-block;
      padding: 12px;
      background-color: maroon;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      text-align: center;
      width: 100%;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #8b0000;
    }

    button:disabled {
      background-color: #ccc;
      /* Light grey */
      color: #666;
      /* Darker grey for text */
      cursor: not-allowed;
      /* Show "not allowed" cursor */
      opacity: 0.6;
      /* Optional: Slightly transparent for a subtle effect */
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Page Title -->
    <h1>Spanish Prompt Generation</h1>

    <!-- Left Column -->
    <div class="column">
      <div class="checkbox-group" id="checkbox-container"> </div>
      <textarea id="checked-items" placeholder="Checked items will appear here..." readonly></textarea>
      <textarea id="unchecked-items" placeholder="Unchecked items will appear here..." readonly></textarea>
      <input type="text" id="vocab-list" placeholder="Vocab List">
    </div>

    <!-- Right Column -->
    <div class="column">
      <input type="text" id="format" placeholder="Activity Type (ex. conversational practice, worksheet, etc.)">
      <input type="text" id="setting" placeholder="Setting (ex. coffee shop, a big city, a school, etc.)">
      <input type="text" id="scenario" placeholder="Scenario (ex. getting coffee with a friend)">
      <input type="text" id="register" placeholder="Register (ex. tu, usted)">
      <input type="text" id="activity-length" placeholder="Activity Length (ex. 5 exchanges, 10 questions, etc.)">
      <input type="text" id="tutor-role" placeholder="Tutor Role (ex. student, parent, friend, etc.)">
      <input type="text" id="tutee-role" placeholder="Tutee Role (ex. student, parent, friend, etc.)">
      <textarea id="final-output" placeholder="Concatenated output will appear here..." readonly></textarea>
      <button id="copy-button" onclick="copyToClipboard()" disabled>Copy Prompt</button>
    </div>
  </div>

  <script>
    function updateTextAreas() {
      const checkboxes = document.querySelectorAll('input[type="checkbox"]');
      const checkedItems = [];
      const uncheckedItems = [];

      checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
          checkedItems.push(checkbox.value);
        } else {
          uncheckedItems.push(checkbox.value);
        }
      });

      // Update checked and unchecked textareas
      // Update this for each to say Tutor MUST USE
      // Update this for each to say Tutor MUST NOT USE
      document.getElementById('checked-items').value = "Allowed: " + checkedItems.join(', ');
      document.getElementById('unchecked-items').value = "Not allowed: " + uncheckedItems.join(', ');

      // Concatenate all inputs with prompt context
      const format = document.getElementById('format').value;
      const setting = document.getElementById('setting').value;
      const scenario = document.getElementById('scenario').value;
      const register = document.getElementById('register').value;
      const activityLength = document.getElementById('activity-length').value;
      const tutorRole = document.getElementById('tutor-role').value;
      const tuteeRole = document.getElementById('tutee-role').value;

      const finalOutput = `
The tutor can ONLY USE ${checkedItems.join(', and the tutor can ONLY USE ')}.
The tutor MUST NOT USE ${uncheckedItems.join(', and the tutor MUST NOT USE ')}.
Fully immersive conversational activity in Spanish. All dialogue must be in the target language. Scenario: ${setting}. Topic: ${scenario}. Tutor's Role: ${tutorRole}. Tutee's Role: ${tuteeRole}. 
Mimic a natural, conversational exchange using the ${register} register. 
Use at least two words from the provided vocabulary list in every response or question. 
If a video, photo, website or text is attached, use this as additional context for the conversation and scenario.
Include expressions that show interest and encourage dialogue (e.g., “¡Qué interesante!”, “Cuéntame más sobre eso”). 
Avoid giving opinions, judgments, or correcting the students errors directly. 
Feedback and clarifications must remain in the target language and be integrated into the flow of conversation. 
Keep tutor responses short, simple, and relevant to the scenario. Tutor responses MUST ONLY BE 1-2 sentences long and tutor responses MUST ONLY BE detailed.
End every response with a follow-up question to keep the conversation going. 
If the tutees input is unclear, ask clarifying questions that stay within the context of the scenario.
The conversation must have at least ${activityLength} exchanges before concluding. All exchanges must be related to the topic and situation. 
If the tutee attempts to end early, the tutor should encourage continuation by saying: ¡Vamos a seguir conversando un poco más! followed by a new question. 
End the conversation when the tutee says goodbye, using a simple farewell like “¡Hasta pronto!”, “¡Hasta la próxima!”, or “¡Que estés bien!”. 
Setting: ${setting}
Scenario: ${scenario}
Register: ${register}
Activity Length: ${activityLength}
Tutor Role: ${tutorRole}
Tutee Role: ${tuteeRole}
Format: ${format}
      `.trim();

      document.getElementById('final-output').value = finalOutput;
    }

    function copyToClipboard() {
      const finalOutput = document.getElementById('final-output');
      finalOutput.select(); // Select the text in the textarea
      finalOutput.setSelectionRange(0, 99999); // For mobile devices
      navigator.clipboard.writeText(finalOutput.value).then(() => {
        alert("Prompt copied to clipboard!");
      }).catch(err => {
        console.error("Could not copy text: ", err);
      });
    }

    // Update final output when input fields change
    document.querySelectorAll('#setting, #scenario, #register, #activity-length, #tutor-role, #tutee-role, #format')
      .forEach(input => input.addEventListener('input', updateTextAreas));

    // Update final output when input fields change
    document.querySelectorAll('#setting, #scenario, #register, #activity-length, #tutor-role, #tutee-role, #format')
      .forEach(input => input.addEventListener('input', toggleCopyButton));

    // Dynamically add checkboxes
    grammarOptions = ['Subordinate clauses', 'Direct object pronouns', 'Indirect object pronouns', 'Possessive pronouns', 'Demonstrative pronouns', 'Relative pronouns', 'Regular verbs', 'Stem-changing verbs', 'Irregular verbs', 'Reflexive verbs', 'Verbs like gustar', 'Pronominal verbs', 'Present verb tense', 'Present perfect verb tense', 'Preterite (Simple Past) verb tense', 'Imperfect verb tense', 'Past Perfect verb tense', 'Future verb tense', 'Future Perfect verb tense', 'Conditional verb tense', 'Conditional Perfect verb tense', 'Present Subjunctive verb tense', 'Subjunctive verb tense with subordinate noun clauses', 'Subjunctive verb tense with subordinate adjective clauses', 'Subjunctive verb tense with subordinate adverb clauses', 'Present Perfect Subjuctive verb tense', 'Imperfect Subjunctive verb tense', 'Past Perfect Subjunctive verb tense', 'Future Subjunctive verb tense', 'Future Perfect Subjunctive verb tense', 'Informal (Tú) Affirmative Command verb tense', 'Formal (Usted/Ustedes) Affirmative Command verb tense', 'Nosotros (Lets) Affirmative Command verb tense', 'Vosotros Affirmative Command verb tense', 'Informal (Tú) Negative Command verb tense', 'Formal (Usted/Ustedes) Negative Command verb tense', 'Nosotros (Let’s) Negative Command verb tense', 'Vosotros Negative Command verb tense', 'Infinitive form', 'Gerunds', 'Participios (past participle)',]

    // Function to dynamically populate checkboxes
    function createCheckboxes() {
      const container = document.getElementById('checkbox-container');
      grammarOptions.forEach(option => {
        // Create label
        const label = document.createElement('label');
        label.textContent = option;
        label.style.display = 'block';
        label.style.marginBottom = '10px';
        label.style.padding = '10px';
        label.style.borderRadius = '8px';
        label.style.cursor = 'pointer';
        label.style.transition = 'background-color 0.3s, border-color 0.3s';

        // Create input
        const input = document.createElement('input');
        input.type = 'checkbox';
        input.value = option;
        input.style.marginRight = '10px';
        input.onchange = updateTextAreas;

        // Append input to label
        label.insertBefore(input, label.firstChild);

        // Append label to container
        container.appendChild(label);
      });
    }

    function toggleCopyButton() {
      const setting = document.getElementById('setting').value.trim();
      const scenario = document.getElementById('scenario').value.trim();
      const register = document.getElementById('register').value.trim();
      const activityLength = document.getElementById('activity-length').value.trim();

      // Enable the button only if all fields are non-empty
      const copyButton = document.getElementById('copy-button');
      if (setting && scenario && register && activityLength) {
        copyButton.disabled = false;

      } else {
        copyButton.disabled = true;
      }
    }

    // Call the function when the page loads
    document.addEventListener('DOMContentLoaded', createCheckboxes);

  </script>
</body>

</html>
